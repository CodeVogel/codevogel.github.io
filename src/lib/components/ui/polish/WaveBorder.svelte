<script lang="ts">
   import { onMount } from 'svelte';

   let className = '';
   let speed = 2;
   let offsetX = 0;
   const imageWidth = 3000;
   const resetPoint = (-imageWidth / 3) * 2;
   const animationRate = 1000 / 60; // 60 fps

   // While page is open, move the wave border to the left by speed.
   // If the offset is smaller than -imageWidth / 2, reset it to 0 and subtract the rest.
   onMount(() => {
      const interval = setInterval(() => {
         offsetX -= speed;
         if (offsetX === resetPoint) {
            offsetX = 0;
         }
         if (offsetX < resetPoint) {
            let rest = resetPoint - offsetX;
            offsetX = -rest;
         }
      }, animationRate);

      return () => clearInterval(interval);
   });

   export let flipY = false;
   export { className as class };
</script>

<svg
   id="Layer_2"
   class="w-[300vw] {className}"
   preserveAspectRatio="none"
   data-name="Layer 2"
   xmlns="http://www.w3.org/2000/svg"
   viewBox="0 0 3000 100"
>
   <defs>
      <style>
         .wave-1 {
            @apply fill-background-800;
         }

         .wave-2 {
            @apply fill-background-700;
         }

         .wave-3 {
            @apply fill-background-600;
         }

         .wave-4 {
            @apply fill-background-500;
         }

         .wave-5 {
            @apply fill-background-400;
         }
      </style>
   </defs>
   <g
      id="visual"
      transform={`scale(1,${flipY ? '-1' : '1'}) translate(${offsetX} ${flipY ? -100 : 0})`}
   >
      <g>
         <g>
            <path
               class="wave-5"
               d="m0,72.46c5.5-.1,13.76-.17,23.75.06,64.08,1.48,73.56,12.35,118.96,13.34,34.81.76,36.58-3.64,105.96-7.65,12.25-.71,24.49-1.01,36.75-.56,47.6,1.75,95.1,14.92,142.92,17.86,47.71,2.9,95.62-4.39,143.33-3.73,47.81.66,95.31,9.26,142.92,8.12,47.6-1.18,95.1-12.15,142.71-16.23,47.6-4.12,95.1-1.32,118.96.04l23.75,1.4V0H0v72.46Z"
            />
            <path
               class="wave-4"
               d="m0,53.83c5.51.08,13.76.23,23.75.49,55.7,1.45,77.49,4.23,118.96,6.45,72.32,3.87,85.62-.03,142.71,4.91,85.41,7.4,86.79,14.69,142.92,14.96,70.09.34,74.87-12.72,138-11.3,73.53,1.64,79.16,19.62,148.25,19.38,37.75-.14,44.96-5.53,130.32-15.56,44.11-5.18,80.81-8.27,104.67-10.07,16.81-.7,33.62-1.4,50.42-2.1V0H0v53.83Z"
            />
            <path
               class="wave-3"
               d="m0,46.07c6.19-.11,15.39-.19,26.5,0,58.61,1.04,84.51,8.33,116.21,10.65,49.91,3.66,53.58-7.76,142.71-16.72,47.6-4.78,95.1-4.17,142.92-1.75,47.71,2.41,95.62,6.62,143.33,11.1,47.81,4.47,95.31,9.13,142.92,6.71,87.49-4.43,93.79-16.73,142.71-10.75,34.94,4.27,57.02,14.61,118.96,18.95,9.92.69,18.19,1.05,23.75,1.24,0-1.5,0-3.01,0-4.51,0-20.33,0-40.67,0-61H0v46.07Z"
            />
            <path
               class="wave-2"
               d="m0,52.21c5.71.1,13.91.23,23.75.31,0,0,63.14.53,118.96-1.75,42.87-1.75,44.67-3.4,142.71-13.34,47.6-4.83,95.1-8.6,142.92-11.45,47.71-2.85,95.62-4.78,143.33.04,47.81,4.83,95.31,16.41,142.92,16.89,47.6.53,95.1-10,142.71-15.18,47.6-5.22,95.1-5.05,118.96-5l23.75.09V0H0v52.21Z"
            />
            <path
               class="wave-1"
               d="m0,3.95c64.15-1.27,115.37.96,150.4,3.25,52.06,3.4,62.03,6.51,135.02,12.11,45.34,3.48,87.38,6.55,142.92,7.68,47.71.97,95.62-.53,143.33-2.63,47.81-2.11,95.31-4.91,142.92-7.55,80.93-4.47,121.68-5.72,142.71-3.99,24.92,2.04,59.44,6.58,118.86,9.14,10.05.43,18.35.7,23.84.86V0H0v3.95Z"
            />
         </g>
         <g>
            <path
               class="wave-5"
               d="m2000,0h-23.75c-23.85,0-71.35,0-118.96,0h-142.71c-47.6,0-95.1,0-142.92,0s-95.62,0-143.33,0c-47.81,0-95.31,0-142.92,0h-142.71c-47.6,0-95.1,0-118.96,0h-23.75s0,85.11,0,85.11l23.75-1.4c23.85-1.36,71.35-4.17,118.96-.04,47.6,4.08,95.1,15.05,142.71,16.23,47.6,1.14,95.1-7.46,142.92-8.12,47.71-.66,95.62,6.62,143.33,3.73,47.81-2.94,95.31-16.1,142.92-17.86,12.26-.45,24.5-.15,36.75.56,69.38,4,71.15,8.4,105.96,7.65,45.4-.99,54.88-11.86,118.96-13.34,9.99-.23,18.25-.16,23.75-.06,0-24.15,0-48.3,0-72.46Z"
            />
            <path
               class="wave-4"
               d="m2000,0h-23.75c-23.85,0-71.35,0-118.96,0h-142.71c-47.6,0-95.1,0-142.92,0s-95.62,0-143.33,0c-47.81,0-95.31,0-142.92,0h-142.71c-47.6,0-95.1,0-118.96,0h-23.75s0,60.98,0,60.98c16.81.7,33.62,1.4,50.42,2.1,23.86,1.79,60.56,4.89,104.67,10.07,85.36,10.02,92.57,15.42,130.32,15.56,69.09.25,74.72-17.73,148.25-19.38,63.13-1.41,67.91,11.64,138,11.3,56.12-.27,57.51-7.56,142.92-14.96,57.08-4.95,70.39-1.05,142.71-4.91,41.47-2.22,63.26-5,118.96-6.45,9.99-.26,18.24-.4,23.75-.49,0-17.94,0-35.88,0-53.83Z"
            />
            <path
               class="wave-3"
               d="m2000,0h-23.75c-23.85,0-71.35,0-118.96,0h-142.71c-47.6,0-95.1,0-142.92,0s-95.62,0-143.33,0c-47.81,0-95.31,0-142.92,0h-142.71c-47.6,0-95.1,0-118.96,0h-23.75c0,20.33,0,40.67,0,61,0,1.5,0,3.01,0,4.51,5.56-.19,13.83-.55,23.75-1.24,61.94-4.34,84.02-14.68,118.96-18.95,48.92-5.98,55.22,6.31,142.71,10.75,47.6,2.41,95.1-2.24,142.92-6.71,47.71-4.47,95.62-8.69,143.33-11.1,47.81-2.41,95.31-3.03,142.92,1.75,89.13,8.95,92.79,20.38,142.71,16.72,31.7-2.33,57.6-9.61,116.21-10.65,11.11-.2,20.31-.12,26.5,0V0Z"
            />
            <path
               class="wave-2"
               d="m2000,0h-23.75c-23.85,0-71.35,0-118.96,0h-142.71c-47.6,0-95.1,0-142.92,0s-95.62,0-143.33,0c-47.81,0-95.31,0-142.92,0h-142.71c-47.6,0-95.1,0-118.96,0h-23.75s0,22.81,0,22.81l23.75-.09c23.85-.04,71.35-.22,118.96,5,47.6,5.18,95.1,15.71,142.71,15.18,47.6-.48,95.1-12.06,142.92-16.89,47.71-4.83,95.62-2.9,143.33-.04,47.81,2.85,95.31,6.62,142.92,11.45,98.04,9.94,99.84,11.59,142.71,13.34,55.82,2.28,118.96,1.75,118.96,1.75,9.84-.08,18.04-.21,23.75-.31V0Z"
            />
            <path
               class="wave-1"
               d="m2000,0h-23.75c-23.85,0-71.35,0-118.96,0h-142.71c-47.6,0-95.1,0-142.92,0s-95.62,0-143.33,0c-47.81,0-95.31,0-142.92,0h-142.71c-47.6,0-95.1,0-118.96,0h-23.75c0,7.6,0,15.21,0,22.81,5.49-.16,13.79-.43,23.84-.86,59.43-2.56,93.94-7.1,118.86-9.14,21.03-1.72,61.78-.48,142.71,3.99,47.6,2.63,95.1,5.44,142.92,7.55,47.71,2.11,95.62,3.6,143.33,2.63,55.54-1.12,97.58-4.2,142.92-7.68,72.98-5.6,82.96-8.71,135.02-12.11,35.03-2.29,86.25-4.52,150.4-3.25V0Z"
            />
         </g>
         <g>
            <path
               class="wave-5"
               d="m2000,72.46c5.5-.1,13.76-.17,23.75.06,64.08,1.48,73.56,12.35,118.96,13.34,34.81.76,36.58-3.64,105.96-7.65,12.25-.71,24.49-1.01,36.75-.56,47.6,1.75,95.1,14.92,142.92,17.86,47.71,2.9,95.62-4.39,143.33-3.73,47.81.66,95.31,9.26,142.92,8.12,47.6-1.18,95.1-12.15,142.71-16.23,47.6-4.12,95.1-1.32,118.96.04l23.75,1.4V0h-428.33C2523.96,0,2476.04,0,2428.33,0h-428.33v72.46Z"
            />
            <path
               class="wave-4"
               d="m2000,53.83c5.51.08,13.76.23,23.75.49,55.7,1.45,77.49,4.23,118.96,6.45,72.32,3.87,85.62-.03,142.71,4.91,85.41,7.4,86.79,14.69,142.92,14.96,70.09.34,74.87-12.72,138-11.3,73.53,1.64,79.16,19.62,148.25,19.38,37.75-.14,44.96-5.53,130.32-15.56,44.11-5.18,80.81-8.27,104.67-10.07,16.81-.7,33.62-1.4,50.42-2.1V0h-428.33C2523.96,0,2476.04,0,2428.33,0h-428.33v53.83Z"
            />
            <path
               class="wave-3"
               d="m2000,46.07c6.19-.11,15.39-.19,26.5,0,58.61,1.04,84.51,8.33,116.21,10.65,49.91,3.66,53.58-7.76,142.71-16.72,47.6-4.78,95.1-4.17,142.92-1.75,47.71,2.41,95.62,6.62,143.33,11.1,47.81,4.47,95.31,9.13,142.92,6.71,87.49-4.43,93.79-16.73,142.71-10.75,34.94,4.27,57.02,14.61,118.96,18.95,9.92.69,18.19,1.05,23.75,1.24,0-1.5,0-3.01,0-4.51,0-20.33,0-40.67,0-61C2992.08,0,2984.17,0,2976.25,0c-23.85,0-71.35,0-118.96,0h-285.62C2523.96,0,2476.04,0,2428.33,0h-428.33v46.07Z"
            />
            <path
               class="wave-2"
               d="m2000,52.21c5.71.1,13.91.23,23.75.31,0,0,63.14.53,118.96-1.75,42.87-1.75,44.67-3.4,142.71-13.34,47.6-4.83,95.1-8.6,142.92-11.45,47.71-2.85,95.62-4.78,143.33.04,47.81,4.83,95.31,16.41,142.92,16.89,47.6.53,95.1-10,142.71-15.18,47.6-5.22,95.1-5.05,118.96-5l23.75.09V0h-428.33C2523.96,0,2476.04,0,2428.33,0h-428.33v52.21Z"
            />
            <path
               class="wave-1"
               d="m2000,3.95c64.15-1.27,115.37.96,150.4,3.25,52.06,3.4,62.03,6.51,135.02,12.11,45.34,3.48,87.38,6.55,142.92,7.68,47.71.97,95.62-.53,143.33-2.63,47.81-2.11,95.31-4.91,142.92-7.55,80.93-4.47,121.68-5.72,142.71-3.99,24.92,2.04,59.44,6.58,118.86,9.14,10.05.43,18.35.7,23.84.86V0h-428.33C2523.96,0,2476.04,0,2428.33,0h-428.33v3.95Z"
            />
         </g>
      </g>
   </g>
</svg>
